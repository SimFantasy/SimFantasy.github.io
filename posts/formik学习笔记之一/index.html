<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Formik学习笔记之一 | SimFantasy</title>
<meta name=author content="Simz"><meta name=description content="继续挖Codevolution大佬的教程。form在很多场景都会用到，最少都是一个登录注册。使用Formik可以大大简化数据收集以及表单验证的过程。油管上大佬教程的地址奉上：
React Formik Tutorial
结合react-query提交表单数据很犀利。"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Formik学习笔记之一"><meta name=twitter:description content="继续挖Codevolution大佬的教程。form在很多场景都会用到，最少都是一个登录注册。使用Formik可以大大简化数据收集以及表单验证的过程。油管上大佬教程的地址奉上：
React Formik Tutorial
结合react-query提交表单数据很犀利。"><meta property="og:title" content="Formik学习笔记之一"><meta property="og:description" content="继续挖Codevolution大佬的教程。form在很多场景都会用到，最少都是一个登录注册。使用Formik可以大大简化数据收集以及表单验证的过程。油管上大佬教程的地址奉上：
React Formik Tutorial
结合react-query提交表单数据很犀利。"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost/posts/formik%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E4%B8%80/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-18T11:33:46+00:00"><meta property="article:modified_time" content="2022-10-18T11:33:46+00:00"><link rel=stylesheet href=/css/bootstrap.min.css crossorigin=anonymous><link href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/sass/main.css><link rel=stylesheet href=/zoomjs/zoom.min.css><script src=/js/lazysizes.min.js></script><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=123"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=123"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=123"><link rel=manifest href=/site.webmanifest></head><body><nav class="navbar navbar-default navbar-custom navbar-fixed-top invert"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=http://localhost/>SimFantasy</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/ title=Home>Home</a></li><li><a href=/archive/ title=Archive>Archive</a></li><li><a href=/series/ title=Note>Note</a></li><li class=search-icon><a href=javascript:void(0)><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse"),__HuxNav__={close:function(){$navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)},open:function(){$collapse.style.height="auto",$navbar.className+=" in"}};$toggle.addEventListener("click",function(){$navbar.className.indexOf("in")>0?__HuxNav__.close():__HuxNav__.open()}),document.addEventListener("click",function(e){if(e.target==$toggle)return;if(e.target.className=="icon-bar")return;__HuxNav__.close()})</script><div class=search-page><div class=search-icon-close-container><span class=search-icon-close><i class="fa fa-chevron-down"></i></span></div><div class="search-main container"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><form></form><input type=text id=search-input placeholder="$ grep..."></form><div id=search-results class=mini-post-list></div></div></div></div></div><style type=text/css>header.intro-header{position:relative;background-image:url('')}</style><header class="intro-header style-text"><div class=header-mask></div><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Formik学习笔记之一</h1><h2 class=subheading></h2><span class=meta><div class=meta-item><i class="far fa-user-circle"></i> Simz</div><div class=meta-item><i class="far fa-calendar"></i> 2022-10-18</div><div class=meta-item><i class="fa fa-tag"></i>
<a href=/tags/react/ title=React>React</a>
<a href=/tags/formik/ title=Formik>Formik</a></div></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><p>继续挖Codevolution大佬的教程。form在很多场景都会用到，最少都是一个登录注册。使用Formik可以大大简化数据收集以及表单验证的过程。油管上大佬教程的地址奉上：</p><p><a href="https://www.youtube.com/playlist?list=PLC3y8-rFHvwiPmFbtzEWjESkqBVDbdgGu" target=_blank>React Formik Tutorial</a></p><p>结合<code>react-query</code>提交表单数据很犀利。</p><p>Formik是一个React的表单库，他的目标是解决三个问题：</p><ol><li>获取表单项的状态值。</li><li>表单项的验证和错误消息提示。</li><li>处理表单数据提交。</li></ol><p>‍</p><h3 id=安装>安装<a class=anchorjs-link href=#%e5%ae%89%e8%a3%85></a></h3><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span>pnpm add formik
</span></span></code></pre></div><p>‍</p><h3 id=基础使用>基础使用<a class=anchorjs-link href=#%e5%9f%ba%e7%a1%80%e4%bd%bf%e7%94%a8></a></h3><p>通过Formik提供的钩子函数<code>useFormik</code>可以快速上手。</p><p>代码一次性贴上，逐块说明。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  1</span><span><span style=color:#8839ef>import</span> React from <span style=color:#40a02b>&#39;react&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  2</span><span><span style=color:#8839ef>import</span> { useFormik } from <span style=color:#40a02b>&#39;formik&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  3</span><span><span style=color:#8839ef>import</span> { FormPageWrap } from <span style=color:#40a02b>&#39;./style&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  5</span><span><span style=color:#8839ef>const</span> FormPage <span style=color:#04a5e5;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  6</span><span>  <span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  7</span><span>    name<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  8</span><span>    email<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">  9</span><span>    channel<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 10</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 12</span><span>  <span style=color:#8839ef>const</span> onSubmit <span style=color:#04a5e5;font-weight:700>=</span> values =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 13</span><span>    console.log(<span style=color:#40a02b>&#39;values&#39;</span>, values)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 14</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 16</span><span>  <span style=color:#8839ef>const</span> validate <span style=color:#04a5e5;font-weight:700>=</span> values =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 17</span><span>    <span style=color:#d20f39>let</span> errors <span style=color:#04a5e5;font-weight:700>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 18</span><span>    <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.name) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 19</span><span>      errors.name <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;用户名不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 20</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 21</span><span>    <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.email) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 22</span><span>      errors.email <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;邮箱不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 23</span><span>    } <span style=color:#8839ef>else</span> <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span><span style=color:#179299>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i</span>.test(values.email)) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 24</span><span>      errors.email <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;请输入正确的邮箱格式&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 25</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 26</span><span>    <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.channel) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 27</span><span>      errors.channel <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;频道不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 28</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 30</span><span>    <span style=color:#8839ef>return</span> errors
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 31</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 32</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 33</span><span>  <span style=color:#8839ef>const</span> formik <span style=color:#04a5e5;font-weight:700>=</span> useFormik({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 34</span><span>    initialValues,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 35</span><span>    onSubmit,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 36</span><span>    validate
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 37</span><span>  })
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 38</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 39</span><span>  console.log(<span style=color:#40a02b>&#39;validate&#39;</span>, formik.touched)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 40</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 41</span><span>  <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 42</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span>FormPageWrap<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 43</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;page-container&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 44</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span>form onSubmit<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleSubmit}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 45</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 46</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>用户名<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 47</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 48</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 49</span><span>              name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 50</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 51</span><span>              value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.name}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 52</span><span>              onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 53</span><span>              onBlur<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleBlur}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 54</span><span>              placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 55</span><span>            <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 56</span><span>            {formik.touched.name <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> formik.errors.name <span style=color:#04a5e5;font-weight:700>?</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 57</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{formik.errors.name}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 58</span><span>            ) <span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>null</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 59</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 60</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 61</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>邮箱<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 62</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 63</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 64</span><span>              name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 65</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 66</span><span>              value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.email}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 67</span><span>              onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 68</span><span>              onBlur<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleBlur}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 69</span><span>              placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 70</span><span>            <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 71</span><span>            {formik.touched.email <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> formik.errors.email <span style=color:#04a5e5;font-weight:700>?</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 72</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{formik.errors.email}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 73</span><span>            ) <span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>null</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 74</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 75</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 76</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>频道<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 77</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 78</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 79</span><span>              name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 80</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 81</span><span>              value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.channel}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 82</span><span>              onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 83</span><span>              onBlur<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleBlur}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 84</span><span>              placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 85</span><span>            <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 86</span><span>            {formik.touched.channel <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> formik.errors.channel <span style=color:#04a5e5;font-weight:700>?</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 87</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{formik.errors.channel}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 88</span><span>            ) <span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>null</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 89</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 90</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item single&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 91</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 92</span><span>              提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 93</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 94</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 95</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/form&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 96</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 97</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/FormPageWrap&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 98</span><span>  )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 99</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">100</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">101</span><span><span style=color:#8839ef>export</span> <span style=color:#8839ef>default</span> FormPage
</span></span></code></pre></div><p>‍</p><h4 id=初始化数据>初始化数据<a class=anchorjs-link href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%95%b0%e6%8d%ae></a></h4><p>使用Formik提供的<code>initialValues</code>对象。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  name<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;simz&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  email<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  channel<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span>}
</span></span></code></pre></div><p>然后需要在表单向上进行受控绑定。将<code>value</code>绑定<code>formik.values.[表单项name]</code>，将<code>onChange</code>绑定<code>formik.handleChange</code>。即可完成受控组件处理。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span>  value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.name}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">6</span><span>  onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">7</span><span><span style=color:#d20f39>/&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=表单提交数据>表单提交数据<a class=anchorjs-link href=#%e8%a1%a8%e5%8d%95%e6%8f%90%e4%ba%a4%e6%95%b0%e6%8d%ae></a></h4><p>使用Formik提供的<code>onSubmit</code>方法。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#8839ef>const</span> onSubmit <span style=color:#04a5e5;font-weight:700>=</span> values =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  console.log(<span style=color:#40a02b>&#39;values&#39;</span>, values)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>}
</span></span></code></pre></div><p>然后需要处理两个地方。</p><ol><li><p>将提交表单的type设置为submit，否则会报警告。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>提交<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span></code></pre></div></li><li><p>将表单标签的onSubmit绑定为<code>formik.handleSubmit</code>。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>form onSubmit<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleSubmit}<span style=color:#04a5e5;font-weight:700>&gt;&lt;</span><span style=color:#d20f39>/form&gt;</span>
</span></span></code></pre></div></li></ol><p>这样在提交表单后可以通过<code>values</code>获取表单数据。</p><p>‍</p><h4 id=表单验证>表单验证<a class=anchorjs-link href=#%e8%a1%a8%e5%8d%95%e9%aa%8c%e8%af%81></a></h4><p>使用Formik提供的<code>validate</code>方法。</p><p>通过<code>values</code>绑定的表单项名称进行验证。最后返回错误信息。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#8839ef>const</span> validate <span style=color:#04a5e5;font-weight:700>=</span> values =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span>  <span style=color:#d20f39>let</span> errors <span style=color:#04a5e5;font-weight:700>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.name) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>    errors.name <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;用户名不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>  <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.email) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>    errors.email <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;邮箱不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>  } <span style=color:#8839ef>else</span> <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span><span style=color:#179299>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i</span>.test(values.email)) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>    errors.email <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;请输入正确的邮箱格式&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>values.channel) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>    errors.channel <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;频道不能为空&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>  <span style=color:#8839ef>return</span> errors
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>}
</span></span></code></pre></div><p>然后在表单项下方设置错误信息。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span>{formik.errors.name <span style=color:#04a5e5;font-weight:700>?</span> <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{formik.errors.name}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt; : null}</span>
</span></span></code></pre></div><p>‍</p><h5 id=修改表单验证方式>修改表单验证方式<a class=anchorjs-link href=#%e4%bf%ae%e6%94%b9%e8%a1%a8%e5%8d%95%e9%aa%8c%e8%af%81%e6%96%b9%e5%bc%8f></a></h5><p>默认表单验证为提交表单时显示错误。可以通过在表单项上绑定<code>onBlur</code>事件为<code>formik.handleBlur</code>来修改表单验证方式修改为失去焦点后进行验证。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span>  value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.name}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">6</span><span>  onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">7</span><span>  onBlur<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleBlur}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">8</span><span><span style=color:#d20f39>/&gt;</span>
</span></span></code></pre></div><p>这样还有个问题，就是在一个表单项失去焦点后，所有表单项的错误都会显示出来，即使还没开始输入的表单项也会报错，所以需要使用<code>formik.touched</code>这个来协作使用。</p><p><code>formik.touched</code>，可以在表单有焦点后，再失去时才会对表单项进行验证。这样就能阻止没有开始输入的表单项报错。所以在错误信息提示时进行并集绑定。控制显示错误信息的时机。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span>{formik.touched.name <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> formik.errors.name <span style=color:#04a5e5;font-weight:700>?</span> <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{formik.errors.name}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt; : null}</span>
</span></span></code></pre></div><p>‍</p><h3 id=进阶使用>进阶使用<a class=anchorjs-link href=#%e8%bf%9b%e9%98%b6%e4%bd%bf%e7%94%a8></a></h3><p>进阶主要通过一些包和api减少代码，提高使用效率。</p><p>‍</p><h4 id=验证规则优化>验证规则优化<a class=anchorjs-link href=#%e9%aa%8c%e8%af%81%e8%a7%84%e5%88%99%e4%bc%98%e5%8c%96></a></h4><p>上面的代码中，表单的验证规则都需要自己来定义判断，Formik提供了一个yup的prop，可以通过yup预置的一些验证规则，快速的来完成验证。</p><p>‍</p><h5 id=安装-1>安装<a class=anchorjs-link href=#%e5%ae%89%e8%a3%85-1></a></h5><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span>pnpm add yup
</span></span></code></pre></div><p>如何使用？</p><ol><li>引用<code>yup</code>。</li><li>使用<code>formik</code>中的<code>validationSchema</code>方法<code>Yup</code>​。</li><li><code>yup</code>的验证规则可以在其<code>github</code>查看。<a href=https://github.com/jquense/yup target=_blank>yup</a>。</li><li><code>Yup</code>的规则和写法比较简单，根据内置的规则填写限制和对应的错误提示。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#8839ef>import</span> React from <span style=color:#40a02b>&#39;react&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#8839ef>import</span> { useFormik } from <span style=color:#40a02b>&#39;formik&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span><span style=color:#8839ef>import</span> <span style=color:#04a5e5;font-weight:700>*</span> as Yup from <span style=color:#40a02b>&#39;yup&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span><span style=color:#8839ef>import</span> { FormPageWrap } from <span style=color:#40a02b>&#39;./style&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span><span style=color:#8839ef>const</span> FormPage <span style=color:#04a5e5;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>  <span style=color:#9ca0b0;font-style:italic>// 省略代码若干...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span><span style=color:#9ca0b0;font-style:italic></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>  <span style=color:#8839ef>const</span> validationSchema <span style=color:#04a5e5;font-weight:700>=</span> Yup.object({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>    name<span style=color:#04a5e5;font-weight:700>:</span> Yup.string().required(<span style=color:#40a02b>&#39;用户名不能为空！&#39;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>    email<span style=color:#04a5e5;font-weight:700>:</span> Yup.string().email(<span style=color:#40a02b>&#39;请输入正确的邮箱格式！&#39;</span>).required(<span style=color:#40a02b>&#39;邮箱不能为空！&#39;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>    channel<span style=color:#04a5e5;font-weight:700>:</span> Yup.number()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>      .min(<span style=color:#fe640b>3</span>, <span style=color:#40a02b>&#39;请输入大于3的数字！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>      .max(<span style=color:#fe640b>10</span>, <span style=color:#40a02b>&#39;请输入小于10的数字！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>      .required(<span style=color:#40a02b>&#39;频道不能为空！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>  })
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>  <span style=color:#8839ef>const</span> formik <span style=color:#04a5e5;font-weight:700>=</span> useFormik({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>    initialValues,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>    onSubmit,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>    validationSchema
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>  })
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span> <span style=color:#9ca0b0;font-style:italic>// 省略代码若干...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">25</span><span><span style=color:#9ca0b0;font-style:italic></span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">27</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">28</span><span><span style=color:#8839ef>export</span> <span style=color:#8839ef>default</span> FormPage
</span></span></code></pre></div><p>‍</p><h4 id=模板代码的优化>模板代码的优化<a class=anchorjs-link href=#%e6%a8%a1%e6%9d%bf%e4%bb%a3%e7%a0%81%e7%9a%84%e4%bc%98%e5%8c%96></a></h4><p>表单项上的表单模板太多要写一大堆<code>value</code>、<code>onChange</code>、<code>onBlur</code>，这些属性来做成受控组件。<code>formik</code>也可以使用props来解决这个问题。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 使用前
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>  value<span style=color:#04a5e5;font-weight:700>=</span>{formik.values.name}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>  onChange<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleChange}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>  onBlur<span style=color:#04a5e5;font-weight:700>=</span>{formik.handleBlur}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>  placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#d20f39>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span><span style=color:#9ca0b0;font-style:italic>// 使用后
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>input
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>  {...formik.getFieldProps(<span style=color:#40a02b>&#39;name&#39;</span>)}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span><span style=color:#d20f39>/&gt;</span>
</span></span></code></pre></div><p>目前为止我们可以看到还是需要给表单、每个表单项写一些模板代码，来获取props。formik提供了一些组件来减少模板代码。</p><p>使用<code>Formik</code>、<code>Form</code>、<code>Field</code>、<code>ErrorMessage</code>，这四个组件来替换原来的一些属性标签。</p><p>可以看到代码从原来的86行减少到了56行。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#8839ef>import</span> React from <span style=color:#40a02b>&#39;react&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#8839ef>import</span> { Formik, Form, Field, ErrorMessage } from <span style=color:#40a02b>&#39;formik&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span><span style=color:#8839ef>import</span> <span style=color:#04a5e5;font-weight:700>*</span> as Yup from <span style=color:#40a02b>&#39;yup&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span><span style=color:#8839ef>import</span> { FormPageWrap } from <span style=color:#40a02b>&#39;./style&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span><span style=color:#8839ef>const</span> FormPage <span style=color:#04a5e5;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>  <span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>    name<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>    email<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>    channel<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>  <span style=color:#8839ef>const</span> onSubmit <span style=color:#04a5e5;font-weight:700>=</span> values =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>    console.log(<span style=color:#40a02b>&#39;values&#39;</span>, values)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>  <span style=color:#8839ef>const</span> validationSchema <span style=color:#04a5e5;font-weight:700>=</span> Yup.object({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>    name<span style=color:#04a5e5;font-weight:700>:</span> Yup.string().required(<span style=color:#40a02b>&#39;用户名不能为空！&#39;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>    email<span style=color:#04a5e5;font-weight:700>:</span> Yup.string().email(<span style=color:#40a02b>&#39;请输入正确的邮箱格式！&#39;</span>).required(<span style=color:#40a02b>&#39;邮箱不能为空！&#39;</span>),
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>    channel<span style=color:#04a5e5;font-weight:700>:</span> Yup.number()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>      .min(<span style=color:#fe640b>3</span>, <span style=color:#40a02b>&#39;请输入大于3的数字！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>      .max(<span style=color:#fe640b>10</span>, <span style=color:#40a02b>&#39;请输入小于10的数字！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>      .required(<span style=color:#40a02b>&#39;频道不能为空！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span>  })
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">25</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">26</span><span>  <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">27</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span>FormPageWrap<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">28</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>Formik initialValues<span style=color:#04a5e5;font-weight:700>=</span>{initialValues} validationSchema<span style=color:#04a5e5;font-weight:700>=</span>{validationSchema} onSubmit<span style=color:#04a5e5;font-weight:700>=</span>{onSubmit}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">29</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;page-container&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">30</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>Form<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">31</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">32</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>用户名<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">33</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">34</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">35</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">36</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">37</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>邮箱<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">38</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">39</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">40</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">41</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">42</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>频道<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">43</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">44</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">45</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">46</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item single&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">47</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">48</span><span>                提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">49</span><span>              <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">50</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">51</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Form&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">52</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">53</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Formik&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">54</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/FormPageWrap&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">55</span><span>  )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">56</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">57</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">58</span><span><span style=color:#8839ef>export</span> <span style=color:#8839ef>default</span> FormPage
</span></span></code></pre></div><p>接下来看下单个组件的使用。</p><p>‍</p><h4 id=field>Field<a class=anchorjs-link href=#field></a></h4><p>可以通过以下几种方式来渲染表单标签。</p><ol><li><code>as</code>可以渲染<code>input</code>、<code>select</code>、<code>textarea</code>、<code>有效的HTML元素</code>、<code>自定义的React组件</code>。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>Field
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  as<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;textarea&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-textare&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span><span style=color:#d20f39>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">7</span><span><span style=color:#9ca0b0;font-style:italic>// &lt;textarea name=&#34;comment&#34; class=&#34;form-textarea&#34;&gt;&lt;/textarea&gt;
</span></span></span></code></pre></div><ol start=2><li><code>children</code>的方式渲染组件。这种跟最开始的直接在表单标签上编写代码一样了。可以处理一些自定义的组件。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>Field name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;address&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span>  {({ field, meta, form }) =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>    <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span>input type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span> {...field} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>        {meta.touched <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> meta.error <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{meta.error}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>    )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>  }}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Field&gt;</span>
</span></span></code></pre></div><ol start=3><li><code>component</code>的方式渲染<code>input</code>、<code>select</code>、<code>textarea</code>、<code>自定义的React组件</code>。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>Field component<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;select&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;gender&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>option value<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;男&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>男<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/option&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>option value<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;女&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>女<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/option&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Field&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=errormessage>ErrorMessage<a class=anchorjs-link href=#errormessage></a></h4><p>和<code>Field</code>组件类似，也可以通过标签、组件、子组件的方式来渲染。让我们一起看下。</p><ol><li><code>children</code>的方式渲染。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  {msg =&gt; <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{msg}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/ErrorMessage&gt;</span>
</span></span></code></pre></div><p>‍</p><ol start=2><li><code>render</code>方式渲染，和<code>children</code>基本类似，就是一个放在单标签组件里面，一个放在双标签里面的区别。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  render<span style=color:#04a5e5;font-weight:700>=</span>{msg =&gt; <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{msg}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span><span style=color:#d20f39>/&gt;</span>
</span></span></code></pre></div><p>‍</p><ol start=3><li><code>component</code>的方式渲染，可以用几种方式来实现。<code>html标签</code>、<code>react组件</code>、<code>样式化的组件</code>。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// html标签组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage component<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;span&#34;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#34;channel&#34;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span><span style=color:#9ca0b0;font-style:italic>// react组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> ErrorText <span style=color:#04a5e5;font-weight:700>=</span> ({ children }) =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>  <span style=color:#8839ef>return</span> <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{children}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorText} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#9ca0b0;font-style:italic>// 样式化组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>export</span> <span style=color:#8839ef>const</span> ErrorTag <span style=color:#04a5e5;font-weight:700>=</span> styled.div<span style=color:#40a02b>`
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span><span style=color:#40a02b>  display: flex;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span><span style=color:#40a02b>  justify-content: flex-start;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span><span style=color:#40a02b>  align-items: center;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span><span style=color:#40a02b>  height: 40px;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span><span style=color:#40a02b>  font-size: 14px;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span><span style=color:#40a02b>  color: red;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span><span style=color:#40a02b>`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorTag} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span></code></pre></div><p>‍</p><p>说完组件用法，我们再看看提交数据的对象和数组形式。</p><p>‍</p><h4 id=对象数据>对象数据<a class=anchorjs-link href=#%e5%af%b9%e8%b1%a1%e6%95%b0%e6%8d%ae></a></h4><p>一些我们需要做组合的数据，比如：需要提交一组社交账号，都是社交账号，那么就可以放到对象中做成一组。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 初始值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>    social<span style=color:#04a5e5;font-weight:700>:</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>      facebook<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>      twttier<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>    },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span><span style=color:#9ca0b0;font-style:italic>// 组件 可以使用对象方式的name
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;facebook&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>FaceBook Account<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;social.facebook&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;twttier&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>Twttier Account<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;social.twttier&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=数组数据>数组数据<a class=anchorjs-link href=#%e6%95%b0%e7%bb%84%e6%95%b0%e6%8d%ae></a></h4><p>数组的数据组合，比较多用于一个字段的多个值。比如：完整的电话，可以有国家号码+区号+电话号码。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 初始值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  phone<span style=color:#04a5e5;font-weight:700>:</span> [<span style=color:#40a02b>&#39;&#39;</span>, <span style=color:#40a02b>&#39;&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span><span style=color:#9ca0b0;font-style:italic>// 组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phone[0]&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>区号<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phone[0]&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phone[1]&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>电话号码<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phone[1]&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=fieldarray>FieldArray<a class=anchorjs-link href=#fieldarray></a></h4><p>这个是用来做数组列表的组件。比如添加一组货币、一组电话等，组件提供了很多方法可以用来对组件中的子组件进行操作。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#8839ef>import</span> { Formik, Form, Field, ErrorMessage, FieldArray } from <span style=color:#40a02b>&#39;formik&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span><span style=color:#9ca0b0;font-style:italic>// 初始值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  phoneList<span style=color:#04a5e5;font-weight:700>:</span> [<span style=color:#40a02b>&#39;&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span><span style=color:#9ca0b0;font-style:italic>// 组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phoneList&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>电话列表<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>FieldArray name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;phoneList&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>    {({ push, remove, form<span style=color:#04a5e5;font-weight:700>:</span> { values<span style=color:#04a5e5;font-weight:700>:</span> { phoneList } } }) =&gt; <span style=color:#d20f39>（</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>div<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>        {phoneList.map((phone, index) =&gt; (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div key<span style=color:#04a5e5;font-weight:700>=</span>{index}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>Field name<span style=color:#04a5e5;font-weight:700>=</span>{<span style=color:#40a02b>`phoneList[</span><span style=color:#40a02b>${</span>index<span style=color:#40a02b>}</span><span style=color:#40a02b>]`</span>} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>            {index <span style=color:#04a5e5;font-weight:700>&gt;</span> <span style=color:#fe640b>0</span> <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> ( <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span> onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; remove(index)}<span style=color:#04a5e5;font-weight:700>&gt;</span> <span style=color:#04a5e5;font-weight:700>-</span> <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#179299>/button&gt; )} /</span><span style=color:#04a5e5;font-weight:700>/</span> 当只有一组时<span style=color:#d20f39>，</span>不显示删除
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span> onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; push(<span style=color:#40a02b>&#39;&#39;</span>)}<span style=color:#04a5e5;font-weight:700>&gt;</span> <span style=color:#04a5e5;font-weight:700>+</span> <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>        ))}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>    <span style=color:#d20f39>）</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/FieldArray&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span></code></pre></div><p>注意： <code>&lt;Field name={</code>phoneList[${index}]<code>} /></code>这里是使用了解构出来的<code>phoneList</code>。</p><p>‍</p><h4 id=fastfield>FastField<a class=anchorjs-link href=#fastfield></a></h4><p>这个组件是一个优化组件，官方说如果有二三十个表单项时可以使用。<code>Field</code>组件都是受控组件，在表单项中输入任何内容都会更新。但<code>FastField</code>做了优化，在组件表单项输入内容不会立即更新，但在输入其他表单项时，才会更新表单项的内容。官方文档还说了一些限制条件，没看的太明白，应该是说如果在没受到其他表单项状态影响下才能使用。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#8839ef>import</span> { Formik, Form, Field, ErrorMessage, FastField } from <span style=color:#40a02b>&#39;formik&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span><span style=color:#9ca0b0;font-style:italic>// 初始值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  address<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span><span style=color:#9ca0b0;font-style:italic>// 错误提示
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> validationSchema <span style=color:#04a5e5;font-weight:700>=</span> Yup.object({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>  address<span style=color:#04a5e5;font-weight:700>:</span> Yup.string().required(<span style=color:#40a02b>&#39;地址不能为空！&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>})
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span><span style=color:#9ca0b0;font-style:italic>// 组件
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;address&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>地址<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>FastField name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;address&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>    {({ field, meta, form }) =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>      console.log(<span style=color:#40a02b>&#39;field render&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>      <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>input type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> placeholder<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;&#39;</span> {...field} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>          {meta.touched <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> meta.error <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{meta.error}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span>      )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">25</span><span>    }}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">26</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/FastField&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">27</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">28</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=何时发生验证>何时发生验证？<a class=anchorjs-link href=#%e4%bd%95%e6%97%b6%e5%8f%91%e7%94%9f%e9%aa%8c%e8%af%81></a></h4><p>可以根据需要修改值和props来控制Formik运行验证的时机。可以使用<code>validateOnChange</code>和<code>validateOnBlur</code>来进行验证。</p><ol><li><p>在发生<code>onChange</code>事件或方法之后</p><ol><li>handleChange</li><li>setFieldValue</li><li>setValues</li></ol></li><li><p>在发送<code>onBlur</code>事件或方法之后</p><ol><li>handleBlur</li><li>setTouched</li><li>setFieldTouched</li></ol></li><li><p>当进行提交时</p><ol><li>validateForm</li><li>validateField</li></ol></li></ol><p>‍</p><h4 id=字段级的验证>字段级的验证<a class=anchorjs-link href=#%e5%ad%97%e6%ae%b5%e7%ba%a7%e7%9a%84%e9%aa%8c%e8%af%81></a></h4><p>可以通过自定义一个验证方法<code>vaildate</code>，传递给字段进行验证。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 初始值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> initialValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  comment<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span><span style=color:#9ca0b0;font-style:italic>// 自定义验证方法
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> validateComment <span style=color:#04a5e5;font-weight:700>=</span> value =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>  <span style=color:#d20f39>let</span> error
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>  <span style=color:#8839ef>if</span> (<span style=color:#04a5e5;font-weight:700>!</span>value) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>    error <span style=color:#04a5e5;font-weight:700>=</span> <span style=color:#40a02b>&#39;请输入评论~~~&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>  <span style=color:#8839ef>return</span> error
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span><span style=color:#9ca0b0;font-style:italic>// 使用validate接收自定义验证方法
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>评论<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> validate<span style=color:#04a5e5;font-weight:700>=</span>{validateComment} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorText} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span></code></pre></div><p>‍</p><h4 id=手动触发验证>手动触发验证<a class=anchorjs-link href=#%e6%89%8b%e5%8a%a8%e8%a7%a6%e5%8f%91%e9%aa%8c%e8%af%81></a></h4><p>将表单结构调整下，从而可以通过Formik的porps获取到对应的验证方法。</p><p>将原来的Form标签放到一个方法中，通过props传递fomik方法，我们可以打印出fomik上的各种方法。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>Formik initialValues<span style=color:#04a5e5;font-weight:700>=</span>{initialValues} validationSchema<span style=color:#04a5e5;font-weight:700>=</span>{validationSchema} onSubmit<span style=color:#04a5e5;font-weight:700>=</span>{onSubmit}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span>  {formik =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>    console.log(<span style=color:#40a02b>&#39;formik&#39;</span>, formik)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>    <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;page-container&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span>Form<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>用户名<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;name&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorText} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>邮箱<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;email&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorTag} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>频道<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>Field type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span> name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span> <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>              name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;channel&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>              render<span style=color:#04a5e5;font-weight:700>=</span>{msg =&gt; <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-error&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>{msg}<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>            <span style=color:#d20f39>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">25</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">26</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>label htmlFor<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>评论<span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/label&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">27</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>Field
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">28</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;text&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">29</span><span>              name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">30</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-input&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">31</span><span>              validate<span style=color:#04a5e5;font-weight:700>=</span>{validateComment}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">32</span><span>            <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">33</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>ErrorMessage name<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;comment&#39;</span> component<span style=color:#04a5e5;font-weight:700>=</span>{ErrorText} <span style=color:#04a5e5;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">34</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">35</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span>div className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-item single&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">36</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">37</span><span>              提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">38</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">39</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">40</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">41</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">42</span><span>              onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; formik.setFieldTouched(<span style=color:#40a02b>&#39;comment&#39;</span>)}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">43</span><span>            <span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">44</span><span>              查看评论
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">45</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">46</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">47</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">48</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">49</span><span>              onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">50</span><span>                formik.setTouched({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">51</span><span>                  name<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>true</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">52</span><span>                  email<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>true</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">53</span><span>                  channel<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>true</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">54</span><span>                  comment<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#fe640b>true</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">55</span><span>                })
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">56</span><span>              }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">57</span><span>            <span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">58</span><span>              查看全部表单
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">59</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">60</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">61</span><span>              type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">62</span><span>              className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">63</span><span>              onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; formik.validateField(<span style=color:#40a02b>&#39;comment&#39;</span>)}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">64</span><span>            <span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">65</span><span>              验证评论
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">66</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">67</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;button&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span> onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; formik.validateForm()}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">68</span><span>              验证全部表单
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">69</span><span>            <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">70</span><span>          <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">71</span><span>        <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Form&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">72</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/div&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">73</span><span>    )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">74</span><span>  }}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">75</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Formik&gt;</span>
</span></span></code></pre></div><p>通过<code>validateField</code>和<code>validateForm</code>可以获取到在表单上验证的错误信息。但是由于表单之前设置了需要<code>touched</code>才会在界面上现实出来，通过这两个方法，我们只能在调试模式下打印出错误信息。并不会在页面上现实错误。</p><p>通过<code>setFieldTouched</code>和<code>setTouched</code>我们通过触发<code>touched</code>方法可以查看到表单上的错误情况。</p><p>‍</p><h4 id=禁用提交按钮的三个场景>禁用提交按钮的三个场景？<a class=anchorjs-link href=#%e7%a6%81%e7%94%a8%e6%8f%90%e4%ba%a4%e6%8c%89%e9%92%ae%e7%9a%84%e4%b8%89%e4%b8%aa%e5%9c%ba%e6%99%af></a></h4><h5 id=场景一>场景一<a class=anchorjs-link href=#%e5%9c%ba%e6%99%af%e4%b8%80></a></h5><p>需要通过所有验证规则后才可激活提交按钮，否则是禁用的。</p><p>‍</p><p>给提交按钮传递一个方法进行<code>disabled</code>的验证，如果未通过验证，则为<code>ture</code>，通过则为<code>false</code>。</p><ol><li>需要给Formik上增加<code>validateOnMount</code>属性。</li><li>设置<code>disabled={!formik.isValid}</code>，<code>isValid</code>表示是否验证。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>Formik ... validateOnMount<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span>button type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span> className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span> disabled<span style=color:#04a5e5;font-weight:700>=</span>{<span style=color:#04a5e5;font-weight:700>!</span>formik.isValid}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>    提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Formik&gt;</span>
</span></span></code></pre></div><p>‍</p><h5 id=场景二>场景二<a class=anchorjs-link href=#%e5%9c%ba%e6%99%af%e4%ba%8c></a></h5><p>当填写的数据与初始数据相比没有变化，则禁用，有修改才能激活提交按钮。</p><p>‍</p><p>通过<code>dirty</code>与<code>isValid</code>​来进行判断。</p><ol><li><code>dirty</code>方法，是通过与初始值进行判断，是否对初始值做出了更改，如果有更改则为<code>true</code>没有更改则为<code>false</code>。</li><li><code>dirty</code>​方法不需要设置Formik上的<code>validateOnMount</code>。</li><li>但是<code>dirty</code>有个小问题，就是当如果初始值都是有内容且符合验证条件的时候，这个时候它仍然会为<code>false</code>，造成表单无法提交。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span>button
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  disabled<span style=color:#04a5e5;font-weight:700>=</span>{<span style=color:#04a5e5;font-weight:700>!</span>(formik.dirty <span style=color:#04a5e5;font-weight:700>&amp;&amp;</span> formik.isValid)}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">6</span><span>  提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">7</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span></code></pre></div><p>‍</p><h5 id=场景三>场景三<a class=anchorjs-link href=#%e5%9c%ba%e6%99%af%e4%b8%89></a></h5><p>当提交后需要等待API返回消息后才允许再次提交，所以当通过验证提交后，就需要禁用提交按钮，等待API 返回后设置再次激活按钮才可提交。</p><p>‍</p><p>当遇到此场景，需要使用<code>onSubmitProps</code>中的<code>setSubmitting</code>方法设置<code>formik</code>中的<code>isSubmitting</code>。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 提交方法 3秒后设置提交按钮激活
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> onSubmit <span style=color:#04a5e5;font-weight:700>=</span> (values, onSubmitProps) =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  console.log(<span style=color:#40a02b>&#39;values&#39;</span>, values)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>  console.log(<span style=color:#40a02b>&#39;onSubmitProps&#39;</span>, onSubmitProps)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  setInterval(() =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>    onSubmitProps.setSubmitting(<span style=color:#fe640b>false</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>  }, <span style=color:#fe640b>3000</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#9ca0b0;font-style:italic>// 提交按钮需通过验证，或返回isSubmitting的值才能激活
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#04a5e5;font-weight:700>&lt;</span>button
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>  type<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;submit&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>  className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>  disabled<span style=color:#04a5e5;font-weight:700>=</span>{<span style=color:#04a5e5;font-weight:700>!</span>formik.isValid <span style=color:#04a5e5;font-weight:700>||</span> formik.isSubmitting}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span><span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>  提交
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span><span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span></code></pre></div><p>‍</p><h3 id=修改表单初始值>修改表单初始值<a class=anchorjs-link href=#%e4%bf%ae%e6%94%b9%e8%a1%a8%e5%8d%95%e5%88%9d%e5%a7%8b%e5%80%bc></a></h3><p>当需要给表单做示例，比如需要API文档中示例需要填写哪些字段值才能获取到数据，就可以加载示例值然后发起请求，查看返回结果。</p><ol><li>设置修改的示例值</li><li>添加<code>useState</code>一个设置方法<code>const [formValues, setFormValues] = useState(null)</code>​，修改初始值。</li><li>修改Formik标签中的初始值<code>initialValues={formValues || initialValues}</code>允许使用<code>formValues</code>或者<code>initialValues</code>。</li><li>并且在Formik上设置<code>enableReinitialize</code>允许修改初始值。</li><li>最后在按钮上添加点击事件，修改初始值。</li><li>注意需要将设置的值放到组件函数之外，否则会触发验证效果。</li></ol><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 1</span><span><span style=color:#9ca0b0;font-style:italic>// 设置修改的示例值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 2</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> savedValues <span style=color:#04a5e5;font-weight:700>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 3</span><span>  name<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;jacky&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 4</span><span>  email<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;jacky@tom.com&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 5</span><span>  channel<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;5&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 6</span><span>  comment<span style=color:#04a5e5;font-weight:700>:</span> <span style=color:#40a02b>&#39;Good jobs&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 7</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1"> 9</span><span><span style=color:#9ca0b0;font-style:italic>// 使用useState设置一个修改方法，传递修改的示例值
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">10</span><span><span style=color:#9ca0b0;font-style:italic></span><span style=color:#8839ef>const</span> FormPage <span style=color:#04a5e5;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">11</span><span>  <span style=color:#8839ef>const</span> [formValues, setFormValues] <span style=color:#04a5e5;font-weight:700>=</span> useState(<span style=color:#fe640b>null</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">12</span><span>  <span style=color:#8839ef>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">13</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span>FormPageWrap<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">14</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>Formik
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">15</span><span>        initialValues<span style=color:#04a5e5;font-weight:700>=</span>{formValues <span style=color:#04a5e5;font-weight:700>||</span> initialValues}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">16</span><span>        validationSchema<span style=color:#04a5e5;font-weight:700>=</span>{validationSchema}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">17</span><span>        onSubmit<span style=color:#04a5e5;font-weight:700>=</span>{onSubmit}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">18</span><span>        enableReinitialize
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">19</span><span>      <span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">20</span><span>      ...
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">21</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span>button className<span style=color:#04a5e5;font-weight:700>=</span><span style=color:#40a02b>&#39;form-btn&#39;</span> onClick<span style=color:#04a5e5;font-weight:700>=</span>{() =&gt; setFormValues(savedValues)}<span style=color:#04a5e5;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">22</span><span>        载入表单数据
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">23</span><span>      <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/button&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">24</span><span>    <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/Formik&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">25</span><span>  <span style=color:#04a5e5;font-weight:700>&lt;</span><span style=color:#d20f39>/FormPageWrap&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">26</span><span>  )
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">27</span><span>}
</span></span></code></pre></div><p>‍</p><h3 id=清空表单>清空表单<a class=anchorjs-link href=#%e6%b8%85%e7%a9%ba%e8%a1%a8%e5%8d%95></a></h3><p>有两种方法，通过<code>html</code>中类型为<code>reset</code>的按钮，和通过<code>Formik</code>中<code>onSubmitProps</code>的<code>resetForm</code>方法。</p><p>前面这种很简单不做详细说明。</p><p>看下后面的方法代码也很简单。</p><p>在提交后3秒重新激活提交按钮，并清空表单。</p><div class=highlight><pre tabindex=0 style=color:#4c4f69;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">1</span><span><span style=color:#8839ef>const</span> onSubmit <span style=color:#04a5e5;font-weight:700>=</span> (values, onSubmitProps) =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">2</span><span>  console.log(<span style=color:#40a02b>&#39;values&#39;</span>, values)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">3</span><span>  console.log(<span style=color:#40a02b>&#39;onSubmitProps&#39;</span>, onSubmitProps)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">4</span><span>  setInterval(() =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">5</span><span>    onSubmitProps.setSubmitting(<span style=color:#fe640b>false</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">6</span><span>    onSubmitProps.resetForm()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">7</span><span>  }, <span style=color:#fe640b>3000</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#8c8fa1">8</span><span>}
</span></span></code></pre></div><p>‍</p><hr style=visibility:hidden><ul class=pager><li class=previous><a href=/posts/strapi%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E9%89%B4%E6%9D%83/ data-toggle=tooltip data-placement=top title=Strapi用户登录鉴权>Previous<br><span>Strapi用户登录鉴权</span></a></li><li class=next><a href=/posts/formik%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E4%BA%8C/ data-toggle=tooltip data-placement=top title=Formik学习笔记之二>Next<br><span>Formik学习笔记之二</span></a></li></ul><hr style=visibility:hidden></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5>FEATURED TAGS</h5><div class=tags><a href=/tags/api/>Api</a>
<a href=/tags/auth0/>Auth0</a>
<a href=/tags/chakraui/>Chakraui</a>
<a href=/tags/css/>Css</a>
<a href=/tags/egg/>Egg</a>
<a href=/tags/electron/>Electron</a>
<a href=/tags/elementplus/>ElementPlus</a>
<a href=/tags/elementui/>Elementui</a>
<a href=/tags/elint/>Elint</a>
<a href=/tags/eslint/>Eslint</a>
<a href=/tags/express/>Express</a>
<a href=/tags/firebase/>Firebase</a>
<a href=/tags/formik/>Formik</a>
<a href=/tags/git/>Git</a>
<a href=/tags/graphql/>GraphQL</a>
<a href=/tags/hexo/>Hexo</a>
<a href=/tags/icon/>Icon</a>
<a href=/tags/javascript/>Javascript</a>
<a href=/tags/koa/>Koa</a>
<a href=/tags/mongoddb/>Mongoddb</a>
<a href=/tags/nextjs/>Nextjs</a>
<a href=/tags/node/>Node</a>
<a href=/tags/pinia/>Pinia</a>
<a href=/tags/prettier/>Prettier</a>
<a href=/tags/prisma/>Prisma</a>
<a href=/tags/react/>React</a>
<a href=/tags/react-query/>React-Query</a>
<a href=/tags/react-router/>React-Router</a>
<a href=/tags/redux-toolkit/>Redux-Toolkit</a>
<a href=/tags/sequelize/>Sequelize</a>
<a href=/tags/strapi/>Strapi</a>
<a href=/tags/styled-components/>Styled-Components</a>
<a href=/tags/typescript/>Typescript</a>
<a href=/tags/valtio/>Valtio</a>
<a href=/tags/vite/>Vite</a>
<a href=/tags/vscode/>Vscode</a>
<a href=/tags/vue/>Vue</a>
<a href=/tags/vuex/>Vuex</a>
<a href=/tags/zustand/>Zustand</a>
<a href=/tags/%E9%81%BF%E5%9D%91%E6%8C%87%E5%8D%97/>避坑指南</a></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"></ul><p class="copyright text-muted">Copyright &copy; SimFantasy 2024<br>Powered by <a href=https://gohugo.io>Hugo</a></p></div></div></div></footer><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js crossorigin=anonymous></script><script src=/js/hux-blog.min.c4ea77041cd3edbfc8b2622cd887a9a5d8760a4162d14489e36d2a3fa4c90172.js></script><script src=/js/simple-jekyll-search.min.js></script><script src=/js/search.min.53bce5da475b4d362500e5ce5dddfa22e20e1b9018777411d2020b4b839c9310.js></script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")})</script><script type=text/javascript src=/js/jquery.nav.min.ade6bde8f9fcc6a4b40852cb892e9f5912340ab8fe1305149d917fdd16fffd8d.js></script><script>$(document).ready(function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script><script src=/zoomjs/zoom.min.js></script></body></html>